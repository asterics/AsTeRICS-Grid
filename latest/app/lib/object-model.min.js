// ObjectModel v2.6.4 - http://objectmodel.js.org
//MIT License - Sylvain Pollet-Villard

!function(t){var u="Object",c="Array",f="Function",l="conventionForConstant",v="conventionForPrivate",a="definition",h="assertions",p="_description",s="validate",g="_validator",y="test",d="expected",b="received",O="path",j="message",m="errorStack",i="errorCollector",w="unstack",S="prototype",A="constructor",_="_constructor",x="default",E="defaults",P="return",k="arguments",o=["pop","push","reverse","shift","sort","splice","unshift"],r=/\n.*object-model(.|\n)*object-model.*/,F="function"==typeof Proxy,N=Object.defineProperty;function C(t){return Object.getPrototypeOf(t)}function M(t,n){return n instanceof t}function T(t,n){return t.hasOwnProperty(n)}function q(t){return"function"==typeof t}function z(t){return"object"==typeof t}function D(t){return t&&z(t)&&C(t)===Object.prototype}function I(t){return Array.prototype.slice.call(t)}function J(t,n){return void 0===n?t:n}function R(t,n,r,e){for(var i in n||{})if(e||T(n,i))if(r&&D(n[i])){var o={};R(o,t[i],r),R(o,n[i],r),t[i]=o}else t[i]=n[i]}function U(t,n,r,e){N(t,n,{value:r,enumerable:e,writable:!0,configurable:!0})}function Z(t,n){Object.setPrototypeOf(t,n[S]),U(t,A,n)}function B(t,n){t[S]=Object.create(n)/*,t[S][A]=t*/}function G(n,r){if(15<(r=r||[]).length||0<=r.indexOf(n))return"...";if(null==n)return String(n);if("string"==typeof n)return'"'+n+'"';if(M(H,n))return n.toString(r);if(r=[n].concat(r),q(n))return n.name||n.toString(r);if(M(Array,n))return"["+n.map(function(t){return G(t,r)}).join(", ")+"]";if(n.toString!==Object.prototype.toString)return n.toString();if(n&&z(n)){var e=new Array(r.length).join("\t"),t=Object.keys(n);return"{"+t.map(function(t){return"\n"+e+"\t"+t+": "+G(n[t],r)}).join(",")+(t.length?"\n"+e:"")+"}"}return String(n)}function H(t){if(D(t))return H[u](t);var n=function(t){return t=J(n[x],t),n[s](t),t};return K(n,arguments,H),n}"name"in Function.prototype&&"name"in function(){}||N(Function.prototype,"name",{get:function(){var t=Function.prototype.toString.call(this).match(/\s*function\s+([^\(\s]*)\s*/);return t&&t[1]}}),!Object.setPrototypeOf&&M(Array,{__proto__:[]})&&(Object.setPrototypeOf=function(t,n){return t.__proto__=n,t}),B(H,Function[S]);var n=H[S];function K(t,n,r){if(0===n.length)throw new Error("Model definition is required");Z(t,r),t[a]=n[0],t[h]=t[h].slice(),U(t,m,[])}function L(n){if(D(n))Object.keys(n).forEach(function(t){n[t]=L(n[t])});else{if(!M(Array,n))return[n];if(1===n.length)return n.concat(void 0,null)}return n}function Q(n,r,e,i,o,t){var u=i.indexOf(r);if(-1!==u&&-1!==i.slice(u+1).indexOf(r))return n;if(t&&(n=X(n,r)),M(H,r))r[g](n,e,i.concat(r),o);else if(D(r))Object.keys(r).forEach(function(t){Q(null!=n?n[t]:void 0,r[t],e?e+"."+t:t,i,o)});else{for(var c=L(r),f=0,a=c.length;f<a;f++)if(V(n,c[f],e,i))return n;var s={};s[d]=r,s[b]=n,s[O]=e,o.push(s)}return n}function V(t,n,r,e){if(null==t)return t===n;if(D(n)||M(H,n)){var i=[];return Q(t,n,r,e,i),!i.length}return M(RegExp,n)?n.test(t):n===Number||n===Date?t[A]===n&&!isNaN(t):t===n||q(n)&&M(n,t)||t[A]===n}function W(t,n,r,e){for(var i=0,o=n[h].length;i<o;i++){var u,c=n[h][i],f=c[p],a=q(f)?f:function(t,n){return'assertion "'+f+'" returned '+G(t)+" for value "+G(n)};try{u=c.call(n,t)}catch(s){u=s}if(!0!==u){var s={};s[j]=a.call(n,u,t),s[d]=c,s[b]=t,s[O]=r,e.push(s)}}}function X(t,n){if(!t||M(H,t[A]))return t;for(var r=L(n||[]),e=[],i=0,o=r.length;i<o;i++){var u=r[i];M(H,u)&&u[y](t)&&e.push(u)}var c=e.length;return 1===c?new e[0](t):(1<c&&console.warn("Ambiguous model for value "+G(t)+", could be "+e.join(" or ")),t)}n.toString=function(n){return L(this[a]).map(function(t){return G(t,n)}).join(" or ")},n[h]=[],n[s]=function(t,n){this[g](t,null,[],this[m]),this[w](n)},n[y]=function(t){for(var n=this;!T(n,i);)n=C(n);var r,e=n[i];return n[i]=function(){r=!0},new this(t),n[i]=e,!r},n.extend=function(){var n,r,e=this,i=I(this[h]),t=I(arguments);M(H[u],e)?(r={},R(n={},e[a]),R(r,e[S],!1,!0),t.forEach(function(t){M(H,t)&&R(n,t[a],!0),q(t)&&R(r,t[S],!0,!0),z(t)&&R(n,t,!0,!0)}),delete r.constructor):n=t.reduce(function(t,n){return t.concat(L(n))},L(this[a])).filter(function(t,n,r){return r.indexOf(t)===n}),t.forEach(function(t){M(H,t)&&(i=i.concat(t[h]))});var o=new e[A](n);return B(o,e[S]),R(o[S],r),o[h]=i,C(e)!==H[u][S]&&(o[_]=function(t){return R(t,new e(t),!0),t}),o},n.assert=function(t,n){return n=n||G(t),U(t,p,n),this[h]=this[h].concat(t),this},n.defaultTo=function(t){return this[x]=t,this},n[i]=function(t){var n=new TypeError(t.map(function(t){return t[j]}).join("\n"));throw n.stack&&(n.stack=n.stack.replace(r,"")),n},H[l]=function(t){return t.toUpperCase()===t},H[v]=function(t){return"_"===t[0]},U(n,g,function(t,n,r,e){Q(t,this[a],n,r,e),W(t,this,n,e)}),U(n,w,function(t){if(this[m].length){t||(t=this[i]);var n=this[m].map(function(t){if(!t[j]){var n=M(Array,t[d])?t[d]:[t[d]];t[j]="expecting "+(t[O]?t[O]+" to be ":"")+n.map(function(t){return G(t)}).join(" or ")+", got "+(null!=t[b]?(r=t[b],{}.toString.call(r).match(/\s([a-zA-Z]+)/)[1]+" "):"")+G(t[b])}var r;return t});this[m]=[],t.call(this,n)}}),B(H[u]=function(t){var e=function(t){if(M(e,t))return t;if(!M(e,this))return new e(t);if(!M(Object,t)&&void 0!==t){var n={};n[d]=u,n[b]=t,e[m].push(n)}t=J(e[x],t),R(this,e[_](t),!0);var r=function f(a,s,t,n){if(!D(t))return X(s,t);var h=M(Object,s)?s:{};var r=Object.create(C(h));for(var e in h)!T(h,e)||e in t||(r[e]=h[e]);Object.keys(t).forEach(function(i){var o=n?n+"."+i:i,u=H[l](i),c=t[i];D(c)||!h[i]||M(H,h[i][A])||(h[i]=X(h[i],c)),N(r,i,{get:function(){return f(a,h[i],c,o)},set:function(t){if(u&&void 0!==h[i]){var n={};n[j]="cannot redefine constant "+i,a[m].push(n)}var r=f(a,t,c,o);Q(r,c,o,[],a[m]);var e=h[i];h[i]=r,W(s,a,o,a[m]),a[m].length&&(h[i]=e,a[w]())},enumerable:!H[v](i)})});return r}(e,this,e[a]);return e[s](r),r};return B(e,Object[S]),K(e,arguments,H[u]),e},n);var e=H[u][S];e[E]=function(t){return R(this[S],t),this},e.toString=function(t){return G(this[a],t)},U(e,g,function(t,n,r,e){if(z(t))Q(t,this[a],n,r,e);else{var i={};i[d]=this,i[b]=t,i[O]=n,e.push(i)}W(t,this,n,e)}),U(e,_,function(t){return t}),B(H[c]=function(t){var e=function(n){var r;if(n=J(e[x],n),e[s](n),F)r=new Proxy(n,{get:function(t,n){return n===A?e:0<=o.indexOf(n)?tt(t,n,e):t[n]},set:function(t,n,r){nt(t,n,r,e)},getPrototypeOf:function(){return e[S]}});else{for(var t in r=Object.create(Array[S]),n)T(n,t)&&$(r,n,t,e);N(r,"length",{get:function(){return n.length}}),N(r,"toJSON",{value:function(){return n}}),o.forEach(function(t){U(r,t,tt(n,t,e,r))}),Z(r,e)}return r};return B(e,Array[S]),K(e,arguments,H[c]),e},H[S]);var Y=H[c][S];function $(t,n,r,e){N(t,r,{enumerable:!0,get:function(){return n[r]},set:function(t){nt(n,r,t,e)}})}function tt(o,u,c,f){return function(){var t=o.slice();if(Array[S][u].apply(t,arguments),c[s](t),!F)for(var n in t)!T(t,n)||n in f||$(f,o,n,c);for(var r=Array[S][u].apply(o,arguments),e=0,i=o.length;e<i;e++)o[e]=X(o[e],c[a]);return r}}function nt(t,n,r,e){var i=c+"["+n+"]";parseInt(n)===+n&&0<=n&&(r=Q(r,e[a],i,[],e[m],!0));var o=t.slice();o[n]=r,W(o,e,i,e[m]),e[w](),t[n]=r}Y.toString=function(t){return c+" of "+G(this[a],t)},U(Y,g,function(t,n,r,e){if(M(Array,t))for(var i=0,o=t.length;i<o;i++)t[i]=Q(t[i],this[a],(n||c)+"["+i+"]",r,e,!0);else{var u={};u[d]=this,u[b]=t,u[O]=n,e.push(u)}W(t,this,n,e)}),B(H[f]=function(){var o=function(e){e=J(o[x],e);var i=o[a],t=function(){var t,r=[];if(R(r,i[E]),R(r,I(arguments)),r.length>i[k].length){var n={};n[d]=G(e)+" to be called with "+i[k].length+" "+k,n[b]=r.length,o[m].push(n)}return i[k].forEach(function(t,n){r[n]=Q(r[n],t,k+"["+n+"]",[],o[m],!0)}),W(r,o,k,o[m]),o[m].length||(t=e.apply(this,r),P in i&&(t=Q(t,i[P],P+" value",[],o[m],!0))),o[w](),t};return Z(t,o),t};B(o,Function[S]);var t={};return t[k]=I(arguments),K(o,[t],H[f]),o},H[S]);var rt=H[f][S];rt.toString=function(n){var t=f+"("+this[a][k].map(function(t){return G(t,n)}).join(",")+")";return P in this[a]&&(t+=" => "+G(this[a][P])),t},rt[P]=function(t){return this[a][P]=t,this},rt[E]=function(){return this[a][E]=I(arguments),this},U(rt,g,function(t,n,r,e){if(!q(t)){var i={};i[d]=f,i[b]=t,i[O]=n,e.push(i)}}),t.Model=H}(this);